{"remainingRequest":"/home/git/homestorage/homeweb/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/git/homestorage/homeweb/src/homestorage/homeStorage.vue?vue&type=style&index=1&lang=css&","dependencies":[{"path":"/home/git/homestorage/homeweb/src/homestorage/homeStorage.vue","mtime":1586434586906},{"path":"/home/git/homestorage/homeweb/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/git/homestorage/homeweb/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/git/homestorage/homeweb/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/git/homestorage/homeweb/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/git/homestorage/homeweb/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nul,\r\nli {\r\n  list-style-type: none;\r\n}\r\n",{"version":3,"sources":["homeStorage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkKA;AACA;AACA;AACA","file":"homeStorage.vue","sourceRoot":"src/homestorage","sourcesContent":["<template>\r\n  <div id=\"home-storage-wrapper\">\r\n    <div class=\"logout\" @click=\"logout\" v-if=\"isLoggedIn()\">logout</div>\r\n    <div id=\"home-storage\">\r\n      <modal class=\"login\" :toggle=\"toggle\" v-model=\"toggle\" :blocking=\"true\">\r\n        <div slot=\"content\">\r\n          <button @click=\"login\">Login with microsoft account</button>\r\n        </div>\r\n      </modal>\r\n      <ul id=\"trees-wrapper\">\r\n        <tree-item class=\"item\" :item=\"tree\" />\r\n      </ul>\r\n      <div class=\"divider mt-10 mb-10\"></div>\r\n      <div id=\"preview\">\r\n        <preview-wrapper />\r\n      </div>\r\n      <upload-files-progress ref=\"ufp\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport Vue from \"vue\";\r\nimport { Component, Watch } from \"vue-property-decorator\";\r\nimport { Action, Getter } from \"vuex-class\";\r\n\r\n/* components */\r\nimport TreeItem from \"./components/treeItem.vue\";\r\nimport UploadFilesProgress from \"./components/uploadFilesProgress.vue\";\r\nimport PreviewWrapper from \"./components/previewWrapper.vue\";\r\nimport Modal from \"@/generic/modal.vue\";\r\n\r\n/* azure storage */\r\nimport { ContainerItem, BlobItem } from \"@azure/storage-blob/typings/src/generated/src/models\";\r\nimport { IBlobsByContainer } from \"@/homestorage/module/homeStorageState\";\r\n\r\n/* utils */\r\nimport { name } from \"./utils/arrUtils\";\r\n\r\n/* events */\r\nimport { EventBus, Event, IEventNewFiles } from \"@/homestorage/eventBus.ts\";\r\n\r\n/* auth */\r\nimport { user } from \"../auth/user\";\r\n\r\nconst namespace = \"homeStorage\";\r\n\r\n@Component({\r\n  components: {\r\n    \"tree-item\": TreeItem,\r\n    \"upload-files-progress\": UploadFilesProgress,\r\n    \"preview-wrapper\": PreviewWrapper,\r\n    \"modal\": Modal,\r\n  },\r\n})\r\nexport default class HomeStorage extends Vue {\r\n  @Action(\"getContainers\", { namespace })\r\n  public getContainers: any;\r\n\r\n  @Action(\"getBlobsByContainer\", { namespace })\r\n  public getBlobsByContainer: any;\r\n\r\n  @Getter(\"containers\", { namespace })\r\n  public containers!: ContainerItem[];\r\n\r\n  @Getter(\"blobsByContainerTree\", { namespace })\r\n  public tree!: any;\r\n\r\n  @Getter(\"blobByName\", { namespace })\r\n  public blobByName!: any;\r\n\r\n  public toggle: boolean = false;\r\n\r\n  public mounted() {\r\n    if (user.isLoggedIn()) {\r\n      this.loginSuccess();\r\n    } else {\r\n      this.toggle = true;\r\n    }\r\n  }\r\n\r\n  public async login() {\r\n    user.loginPopup(this.loginSuccess);\r\n  }\r\n\r\n  public async logout() {\r\n    user.logout();\r\n  }\r\n\r\n  public isLoggedIn(): boolean {\r\n    return user.isLoggedIn();\r\n  }\r\n\r\n  public async loginSuccess() {\r\n    this.toggle = false;\r\n    await this.getContainers();\r\n    await this.getBlobsByContainer(\"homestorage\");\r\n    EventBus.$on(Event.NEWFILES, this.openUploadFilesProgress);\r\n  }\r\n\r\n  public async openUploadFilesProgress(newFiles: IEventNewFiles) {\r\n    const ufp: UploadFilesProgress = this.$refs.ufp as UploadFilesProgress;\r\n    await ufp.openAndShowProgress(newFiles.fileList, newFiles.folderPath);\r\n    await this.getBlobsByContainer(\"homestorage\");\r\n  }\r\n\r\n  public name(str: string): string {\r\n    return name(str);\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#home-storage {\r\n  display: flex;\r\n  position: relative;\r\n  min-height: 300px;\r\n  width: 1200px;\r\n  margin: -2px 0 0 -2px;\r\n  overflow-x: auto;\r\n\r\n  border-radius: 4px;\r\n  border: 2px solid #5c768c;\r\n\r\n  -webkit-box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.5);\r\n  -moz-box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.5);\r\n  box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.5);\r\n}\r\n#trees-wrapper,\r\n#preview {\r\n  width: calc(49%);\r\n}\r\n#trees-wrapper {\r\n  overflow-x: auto;\r\n  overflow-y: hidden;\r\n  margin-bottom: 85px;\r\n}\r\n.divider {\r\n  border: 1px solid #5c768c;\r\n}\r\n/*** media queries ***/\r\n@media screen and (max-device-width: 1080px) {\r\n  #home-storage {\r\n    width: inherit;\r\n    display: block;\r\n  }\r\n  #trees-wrapper {\r\n    width: initial !important;\r\n  }\r\n  #trees-wrapper * {\r\n    width: max-content;\r\n  }\r\n  #preview {\r\n    width: 100%;\r\n  }\r\n  .divider {\r\n    margin: unset;\r\n  }\r\n}\r\n</style>\r\n\r\n<style>\r\nul,\r\nli {\r\n  list-style-type: none;\r\n}\r\n</style>\r\n"]}]}