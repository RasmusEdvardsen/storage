{"remainingRequest":"/home/git/homestorage/homeweb/node_modules/babel-loader/lib/index.js!/home/git/homestorage/homeweb/node_modules/ts-loader/index.js??ref--13-2!/home/git/homestorage/homeweb/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/git/homestorage/homeweb/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/git/homestorage/homeweb/src/homestorage/components/uploadFilesProgress.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/git/homestorage/homeweb/src/homestorage/components/uploadFilesProgress.vue","mtime":1586434586906},{"path":"/home/git/homestorage/homeweb/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/git/homestorage/homeweb/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/git/homestorage/homeweb/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/git/homestorage/homeweb/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/git/homestorage/homeweb/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.reflect.construct\";\nimport \"core-js/modules/es6.function.name\";\nimport _typeof from \"/home/git/homestorage/homeweb/node_modules/@babel/runtime-corejs2/helpers/esm/typeof\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/git/homestorage/homeweb/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/git/homestorage/homeweb/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/git/homestorage/homeweb/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _inherits from \"/home/git/homestorage/homeweb/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/home/git/homestorage/homeweb/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/git/homestorage/homeweb/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { __decorate } from \"tslib\";\nimport Vue from \"vue\";\nimport { Component } from \"vue-property-decorator\";\nimport { Action } from \"vuex-class\";\nimport Modal from \"@/generic/modal.vue\";\nvar namespace = \"homeStorage\";\n\nvar UploadFilesProgress = /*#__PURE__*/function (_Vue) {\n  _inherits(UploadFilesProgress, _Vue);\n\n  var _super = _createSuper(UploadFilesProgress);\n\n  function UploadFilesProgress() {\n    var _this;\n\n    _classCallCheck(this, UploadFilesProgress);\n\n    _this = _super.apply(this, arguments);\n    _this.toggle = false;\n    _this.isUploading = false;\n    _this.numFiles = 0;\n    _this.numFilesUploaded = 0;\n    _this.currentFile = new File([], \"\");\n    _this.currentFileProgress = 0;\n    return _this;\n  }\n\n  _createClass(UploadFilesProgress, [{\n    key: \"clearAndClose\",\n    value: function clearAndClose() {\n      this.toggle = false;\n      this.numFiles = 0;\n      this.numFilesUploaded = 0;\n      this.currentFile = new File([], \"\");\n    }\n  }, {\n    key: \"openAndShowProgress\",\n    value: function () {\n      var _openAndShowProgress = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(fileList, folderPath) {\n        var _this2 = this;\n\n        var numFiles, _loop, idx, _ret;\n\n        return regeneratorRuntime.wrap(function _callee$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                numFiles = fileList.length;\n                this.toggle = true, this.numFiles = numFiles, this.isUploading = true;\n                _context2.prev = 2;\n                _loop = /*#__PURE__*/regeneratorRuntime.mark(function _loop(idx) {\n                  var file, fileName, uploaded;\n                  return regeneratorRuntime.wrap(function _loop$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          file = fileList.item(idx);\n\n                          if (file) {\n                            _context.next = 3;\n                            break;\n                          }\n\n                          return _context.abrupt(\"return\", {\n                            v: void 0\n                          });\n\n                        case 3:\n                          fileName = folderPath.length > 0 ? folderPath + \"/\" + file.name : file.name;\n                          _this2.currentFile = file;\n                          _context.next = 7;\n                          return _this2.uploadFile({\n                            containerName: \"homestorage\",\n                            fileName: fileName,\n                            file: file,\n                            cb: function cb(progress) {\n                              _this2.currentFileProgress = Math.floor(progress.loadedBytes / file.size * 100);\n                            }\n                          });\n\n                        case 7:\n                          uploaded = _context.sent;\n\n                          if (uploaded === 200 || uploaded === 201) {\n                            _this2.numFilesUploaded++;\n                          }\n\n                        case 9:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _loop);\n                });\n                idx = 0;\n\n              case 5:\n                if (!(idx < fileList.length)) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                return _context2.delegateYield(_loop(idx), \"t0\", 7);\n\n              case 7:\n                _ret = _context2.t0;\n\n                if (!(_typeof(_ret) === \"object\")) {\n                  _context2.next = 10;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", _ret.v);\n\n              case 10:\n                idx++;\n                _context2.next = 5;\n                break;\n\n              case 13:\n                this.isUploading = false;\n                return _context2.abrupt(\"return\");\n\n              case 17:\n                _context2.prev = 17;\n                _context2.t1 = _context2[\"catch\"](2);\n                return _context2.abrupt(\"return\");\n\n              case 20:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee, this, [[2, 17]]);\n      }));\n\n      function openAndShowProgress(_x, _x2) {\n        return _openAndShowProgress.apply(this, arguments);\n      }\n\n      return openAndShowProgress;\n    }()\n  }]);\n\n  return UploadFilesProgress;\n}(Vue);\n\n__decorate([Action(\"uploadFile\", {\n  namespace: namespace\n})], UploadFilesProgress.prototype, \"uploadFile\", void 0);\n\nUploadFilesProgress = __decorate([Component({\n  components: {\n    modal: Modal\n  }\n})], UploadFilesProgress);\nexport default UploadFilesProgress;",{"version":3,"sources":["/home/git/homestorage/homeweb/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/git/homestorage/homeweb/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/git/homestorage/homeweb/src/homestorage/components/uploadFilesProgress.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport Vue from \"vue\";\r\nimport { Component, Watch } from \"vue-property-decorator\";\r\n\r\nimport { Action } from \"vuex-class\";\r\n\r\nimport Modal from \"@/generic/modal.vue\";\r\nimport { TransferProgressEvent } from \"@azure/ms-rest-js\";\r\n\r\nconst namespace = \"homeStorage\";\r\n\r\n@Component({\r\n  components: {\r\n    modal: Modal,\r\n  },\r\n})\r\nexport default class UploadFilesProgress extends Vue {\r\n  @Action(\"uploadFile\", { namespace })\r\n  public uploadFile: any;\r\n\r\n  public toggle: boolean = false;\r\n\r\n  public isUploading = false;\r\n\r\n  public numFiles: number = 0;\r\n  public numFilesUploaded: number = 0;\r\n  public currentFile: File = new File([], \"\");\r\n  public currentFileProgress: number = 0;\r\n\r\n  public clearAndClose() {\r\n    this.toggle = false;\r\n    this.numFiles = 0;\r\n    this.numFilesUploaded = 0;\r\n    this.currentFile = new File([], \"\");\r\n  }\r\n\r\n  public async openAndShowProgress(\r\n    fileList: FileList,\r\n    folderPath: string,\r\n  ): Promise<void> {\r\n    const numFiles = fileList.length;\r\n\r\n    (this.toggle = true), (this.numFiles = numFiles), (this.isUploading = true);\r\n    try {\r\n      for (let idx = 0; idx < fileList.length; idx++) {\r\n        const file = fileList.item(idx);\r\n        if (!file) {\r\n          return;\r\n        }\r\n\r\n        const fileName =\r\n          folderPath.length > 0 ? folderPath + \"/\" + file.name : file.name;\r\n\r\n        this.currentFile = file;\r\n\r\n        const uploaded = await this.uploadFile({\r\n          containerName: \"homestorage\",\r\n          fileName,\r\n          file,\r\n          cb: (progress: TransferProgressEvent) => {\r\n            this.currentFileProgress = Math.floor(\r\n              (progress.loadedBytes / file.size) * 100,\r\n            );\r\n          },\r\n        });\r\n        if (uploaded === 200 || uploaded === 201) {\r\n          this.numFilesUploaded++;\r\n        }\r\n      }\r\n      this.isUploading = false;\r\n      return;\r\n    } catch (error) {\r\n      return;\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}]}